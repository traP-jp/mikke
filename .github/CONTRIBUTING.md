# CONTRIBUTING

開発に参加するためのガイドラインです

セットアップから、ブランチ/コミット運用、開発環境の構築までをまとめています

## 開発の流れ

- このプロジェクトは**issue ドリブン開発**を基本とします
- 大まかな流れ:
  1. [Issue を立てる](#issueを立てる)
  2. [自分をアサイン](#自分をアサイン)
  3. [ブランチをきる](#ブランチをきる)
  4. [作業とコミット](#作業とコミット)
  5. [プルリクエスト](#プルリクエスト)
  6. [レビュー](#レビュー)
  7. [マージ](#マージ)

### Issue を立てる

- **自分が書く時間より、みんなが読む時間の方が多いことを意識**してください
- 初めから綺麗な issue を投げる必要はありません
  後で追記、編集をすれば大丈夫です
- issue テンプレートは全て埋めなくて構いません

#### Issue テンプレートの使い分け

- `Enhancement`: 機能追加や改善の検討に使います
- `Bug`: バグ報告や再現条件の共有に使います
- `Refactor`: 構造改善や内部実装の整理に使います
- `Epic`: 複数の Issue を束ねる親です

### ラベルの使い分け

- ラベル定義は `.github/labels.yml` で管理しています

#### `type/*`

- Issue の性質を示すラベルです
- 基本的に 1 つだけ選択します

#### `area/*`

- 影響する領域を示します
- クライアント、サーバー、ドキュメント、インフラなど複数選択して構いません

#### `priority/*`

- 緊急度の目安です
- Issue 作成時は未定でも構いませんが、優先度が明確になったら更新します

#### `need/*`

- 必要なアクションがある場合に使用します
- 新規 Issue では `need/triage` が付与されてるので、対応方針が決まり具体的作業に入れる段階で外してください

#### `status/*`

- 外部要因で詰まっている場合など、進行状況を補足したいときに使用します

### 自分をアサイン

- issue を立てたら、**必ず自分をアサイン**してください
- 他の人が同じ issue に取り組むのを防ぐためです

### ブランチをきる

- **ブランチのスコープは issue 単位**にしてください
  issue に関係ないリファクタリングや修正は別のブランチで行いましょう
- ブランチ名について:
  - 形式: `{接頭辞}/{issue番号}-{ブランチの目的を英語で}`
  - 日本語は使わず、小文字英数が推奨です

#### ブランチ名の例

| 接頭辞      | 意味                       | 具体例                                |
| :---------- | :------------------------- | :------------------------------------ |
| `feature/`  | 新機能の開発               | `feature/12-user-registration`        |
| `fix/`      | バグの修正                 | `fix/25-login-form-bug`               |
| `refactor/` | リファクタリング           | `refactor/31-optimize-database-query` |
| `docs/`     | ドキュメントの修正         | `docs/5-update-readme`                |
| `chore/`    | ビルドや設定ファイルの変更 | `chore/18-update-dependencies`        |
| `assets/`   | アセットの追加・変更       | `assets/9-add-new-icons`              |

### 作業とコミット

- revert やレビューを意識した粒度でコミットしてください
- `git rebase -i` などで整理してからプッシュしてください
- コミットメッセージについて:
  - 形式: `{接頭辞}: {変更内容の要約}`
  - 補足が必要な場合は 2 行目は空行にし、3 行目以降に詳細を書きます
  - 日本語/英語どちらでも構いません(英語推奨)

#### コミットメッセージの例

| 接頭辞      | 意味                       | 用途や具体例                             |
| :---------- | :------------------------- | :--------------------------------------- |
| `feat:`     | 機能の追加                 | `feat: Added user registration function` |
| `fix:`      | バグの修正                 | `fix: フォームが送信できない問題を修正`  |
| `refactor:` | リファクタリング           | `refactor: データベースクエリの最適化`   |
| `docs:`     | ドキュメントの修正         | `docs: update README.md`                 |
| `chore:`    | ビルドや設定ファイルの変更 | `chore: ライブラリのバージョンアップ`    |
| `assets:`   | アセットの追加・変更       | `assets: 新しいロゴ画像を追加`           |

### プルリクエスト

- プルリクエストの**本文は必要な場合のみ記入**してください
  - GitHub Actions により、issue がブランチ名から抽出され、自動で`Closes #<issue番号>`が追加されます
  - ここから issue にリンクされるため、手動で追加する必要はありません

### レビュー

今は立ち上げの段階なのでレビュー必要人数 0 にしてますが、
徐々にレビュー活発になるといいなと思ってます

初心者でもなんでも、読む方読まれる方どちらも勉強になるので、
ぜひ積極的にレビューしてもらえると助かります

### マージ

- プルリクエストが承認されたら、基本担当者がマージしてください

## 初期設定

### Git Hooks

このリポジトリでは開発体験を高めるために Git Hooks を利用しています。

[README.md](/README.md#はじめに)に初期設定の手順が載っています。
**必ず最初に 1 度だけ、初期設定を行なってください**。

#### 利用しているフック

- pre-commit
  - Client: [.githooks/client/pre-commit.sh](/.githooks/client/pre-commit.sh)
  - Server: [.githooks/server/pre-commit.sh](/.githooks/server/pre-commit.sh)
- post-merge
  - Client: [.githooks/client/post-merge.sh](/.githooks/client/post-merge.sh)
  - Server: [.githooks/server/post-merge.sh](/.githooks/server/post-merge.sh)
